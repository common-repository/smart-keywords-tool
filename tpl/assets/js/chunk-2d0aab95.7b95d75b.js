(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aab95"],{"11dc":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wbs-content"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.isLoaded,expression:"!isLoaded"}],staticClass:"wbs-content-inner full",class:{"wb-page-loaded":t.isLoaded}},[a("div",{staticClass:"wbs-main swt-selection"},[a("div",{staticClass:"swt-main"},[a("div",{staticClass:"skt-search-bar"},[a("el-radio-group",{model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-radio-button",{attrs:{label:"so"}},[t._v("360")]),a("el-radio-button",{attrs:{label:"bing"}},[t._v("必应")]),t.is_pro?[a("el-radio-button",{attrs:{label:"google"}},[t._v("谷歌")]),a("el-radio-button",{attrs:{label:"baidu"}},[t._v("百度")]),a("el-radio-button",{attrs:{label:"taobao"}},[t._v("淘宝")]),a("el-radio-button",{attrs:{label:"trade"}},[t._v("Bing+")])]:[a("el-radio-button",{attrs:{label:"google",disabled:""}},[t._v("谷歌"),a("i",{staticClass:"tag-pro",on:{click:t.pro_click}},[t._v("Pro")])]),a("el-radio-button",{attrs:{label:"baidu",disabled:""}},[t._v("百度"),a("i",{staticClass:"tag-pro",on:{click:t.pro_click}},[t._v("Pro")])]),a("el-radio-button",{attrs:{label:"taobao",disabled:""}},[t._v("淘宝"),a("i",{staticClass:"tag-pro",on:{click:t.pro_click}},[t._v("Pro")])]),a("el-radio-button",{attrs:{label:"trade",disabled:""}},[t._v("Bing+"),a("i",{staticClass:"tag-pro",on:{click:t.pro_click}},[t._v("Pro")])])]],2),a("el-input",{staticClass:"mt",attrs:{placeholder:"请输入关键字",clearable:""},on:{change:t.get_list},model:{value:t.kw,callback:function(e){t.kw=e},expression:"kw"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.get_list},slot:"append"})],1)],1),a("div",{staticClass:"data-list"},[a("el-table",{staticClass:"wbs-table",staticStyle:{width:"100%"},attrs:{data:t.ret},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"关键词"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",[t._v("关键词")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"基于用户输入关键词调用API获取 "+(t.kw?"“"+t.kw+"”":"${search}")+" 智能推荐的关键词。",placement:"top-start"}},[a("svg",{staticClass:"wb-icon sico-qa"},[a("use",{attrs:{"xlink:href":"#sico-qa"}})])])]}},{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row))])]}}])}),a("el-table-column",{attrs:{label:"以词搜词"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("span",[t._v("以词搜词")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击相似关键词对应的搜索按钮，可以快速查找与其相关的关键词。",placement:"top"}},[a("svg",{staticClass:"wb-icon sico-qa"},[a("use",{attrs:{"xlink:href":"#sico-qa"}})])])]}},{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-search",size:"small"},on:{click:function(a){t.kw=e.row,t.get_list()}}})]}}])})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.ret.length>0,expression:"ret.length > 0"}],staticClass:"btns-bar with-ctrl-area mt"},[a("div",{staticClass:"wb-ctrl-area"},[a("el-select",{attrs:{size:"small",placeholder:"批量操作"},model:{value:t.batch_op,callback:function(e){t.batch_op=e},expression:"batch_op"}},[a("el-option",{attrs:{label:"添加至备选",value:"push"}}),a("el-option",{attrs:{label:"添加至标签库",value:"lib"}})],1),a("el-button",{staticClass:"ml-s",attrs:{type:"info",plain:"",size:"small"},on:{click:t.batch_apply}},[t._v("应用")])],1)])],1),a("wb-prompt",{directives:[{name:"show",rawName:"v-show",value:t.isLoaded,expression:"isLoaded"}],staticClass:"mt"})],1),a("div",{staticClass:"output-wp"},[a("div",{staticClass:"output-hd"},[t._v("关键词备选列表")]),a("div",{staticClass:"output-list mt"},t._l(t.selected_words,(function(e,l){return a("span",{key:"sw"+l,staticClass:"ol-item"},[t._v(t._s(e))])})),0),a("textarea",{staticClass:"output-area",attrs:{id:"J_skw_output"},on:{focus:function(e){return t.selected()}}},[t._v(t._s(t.selected_words.join(",")))]),a("div",{staticClass:"output-ctrl-bar"},[a("div",{staticClass:"primary"},[a("el-button",{attrs:{type:"primary",plain:"",size:"small",icon:"el-icon-circle-plus"},on:{click:t.add}},[t._v("加入词库")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.active_lexicon_selector,expression:"active_lexicon_selector"}],staticClass:"mt add-action-box"},[a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择要加入的词库"},model:{value:t.new_lexicon,callback:function(e){t.new_lexicon=e},expression:"new_lexicon"}},t._l(t.lexicon_items,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),a("span",{staticClass:"ml"},[t.selected_words.length>0?a("el-button",{attrs:{type:"success",plain:"",circle:"",size:"small",icon:"el-icon-check",title:"确认"},on:{click:t.addToLexcion}}):t._e(),a("el-button",{attrs:{type:"info",plain:"",circle:"",size:"small",icon:"el-icon-close",title:"取消"},on:{click:function(e){t.active_lexicon_selector=0}}})],1)],1)],1),a("div",{staticClass:"side"},[a("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"small",icon:"el-icon-document-copy",title:"复制"},on:{click:t.copy}}),a("el-button",{attrs:{type:"danger",plain:"",circle:"",size:"small",icon:"el-icon-delete",title:"清除"},on:{click:t.clear}})],1)])])])])])},s=[],o=a("bc3a"),i=a.n(o),n={name:"Selection",data(){const t=this;return{isLoaded:!1,is_pro:t.$cnf.is_pro,opt:{},cnf:{api:{baidu:{},so:{},bing:{},google:{}}},kw:"",api:"",type:"so",selected_words:[],ret:[],batch_op:"",multipleSelection:[],active_lexicon_selector:0,lexicon_items:[{value:"HTML",label:"HTML"},{value:"CSS",label:"CSS"},{value:"JavaScript",label:"JavaScript"}],new_lexicon:""}},created(){const t=this;t.$verify(t.verify_run),t.$cnf.is_pro>0&&t.$isPrdActive(t.$WB)},methods:{getData(t){const e=this;e.$api.getData({_ajax_nonce:wb_cnf._wb_skt_ajax_nonce,action:e.$cnf.action.act,op:e.$cnf.action.fetch,group:1}).then((function(a){e.opt=a["data"]["opt"],e.cnf=a["data"]["cnf"],e.api=a["data"]["cnf"]["api"],e.lexicon_items=a["data"]["group"],e.isLoaded=!0,t&&t.api_list&&(e.cnf.api.baidu.url=t.api_list.baidu,e.cnf.api.google.url=t.api_list.google,e.api.baidu.url=t.api_list.baidu,e.api.google.url=t.api_list.google),!e.is_pro&&["so","bing"].indexOf(e.opt.se_type)<0&&(e.opt.se_type="so"),e.type=e.opt.se_type}))},get_list_ret(t){const e=this;e.ret.length>0||e.$wbui.toast(wbl.tips_no_ret),e.$wbui.close(t)},get_list(){const t=this;if(""==t.kw)return void t.$wbui.toast(wbl.pls_input_kw);const e=t.cnf["api"][t.type]["url"],a=t.$wbui.loading();switch(t.type){case"bing":i.a.get(e.replace("type=cb&","")+t.kw).then((function(e){const l=e.data;let s=[];l.AS.FullResults&&l.AS.Results[0].Suggests.forEach((function(t,e){s[e]=t.Txt})),t.ret=s,t.get_list_ret(a)})).catch((function(t){console.log("err",t)}));break;case"trade":i.a.get(e+"?query="+t.kw).then((function(e){const l=e.data;let s=[];l[1].length&&l[1].forEach((function(t,e){s[e]=t})),t.ret=s,t.get_list_ret(a)})).catch((function(t){console.log("err",t)}));break;case"baidu":i.a.get(e+t.kw,{responseType:"text"}).then((function(e){const l=e.data;let s,o=[],i=l.match(/s:\[(.*)]}/);i=i&&i[1],i="["+i+"]",s=JSON.parse(i),s.length&&s.forEach((function(t,e){o[e]=t})),t.ret=o,t.get_list_ret(a)})).catch((function(t){console.log("err",t)}));break;case"google":i.a.get(e+t.kw,{responseType:"text"}).then((function(e){let l=e.data;l=l.replace("window.google.ac.h(",""),l=l.substr(0,l.length-1);let s=JSON.parse(l),o=[];s[1].length&&s[1].forEach((function(t,e){o[e]=t[0]})),t.ret=o,t.get_list_ret(a)})).catch((function(t){console.log("err",t)}));break;case"taobao":i.a.get(e+t.kw).then((function(e){let l=e.data,s="string"===typeof l?JSON.parse(l):l,o=[];s.result.length&&s.result.forEach((function(t,e){o[e]=t[0]})),t.ret=o,t.get_list_ret(a)})).catch((function(t){console.log("err",t)}));break;default:i.a.get(e+t.kw).then((function(e){let l=e["data"],s=[];l.result.length&&l.result.forEach((function(t,e){s[e]=t.word})),t.ret=s,t.get_list_ret(a)})).catch((function(t){console.log("err",t)}));break}return!1},selected(){document.getElementById("J_skw_output").select()},copy(){const t=this;document.getElementById("J_skw_output").select(),document.execCommand("Copy"),t.$wbui.toast(wbl.tips_had_copy)},addToLexcion(){const t=this;return t.selected_words.length<1?(t.$wbui.toast("先选择关键词。"),!1):""===t.new_lexicon?(t.$wbui.toast("请选择词库。"),!1):void t.$api.saveData({_ajax_nonce:wb_cnf._wb_skt_ajax_nonce,action:t.$cnf.action.act,op:"lexicon",append:1,add:{subject:t.new_lexicon,items:t.selected_words}}).then((function(e){t.$wbui.toast("添加成功"),t.new_lexicon="",t.active_lexicon_selector=0}))},clear(){this.selected_words=[]},add(){const t=this;t.active_lexicon_selector=1},pro_click(t){const e=this;e.is_pro||(t.preventDefault(),e.$wbui.open({content:"该功能仅Pro版本提供，您当前使用Free版本。",btn:["升级PRO","取消"],yes(){return e.doActivePro(),!1}}))},verify_run(t,e){const a=this;a.is_pro=0,t&&(a.is_pro=1),a.getData(e)},handleSelectionChange(t){this.multipleSelection=t},batch_apply(){const t=this;return!!t.batch_op&&(t.multipleSelection.length<1?(t.$wbui.toast("未选择项目"),!1):void("push"==t.batch_op?t.selected_words.push(...t.multipleSelection):"lib"==t.batch_op&&t.$api.saveData({_ajax_nonce:wb_cnf._wb_skt_ajax_nonce,action:t.$cnf.action.act,op:"lexicon",tag:t.multipleSelection}).then((function(e){t.$wbui.toast("添加成功"),t.batch_op=""}))))}},computed:{}},c=n,r=a("2877"),u=Object(r["a"])(c,l,s,!1,null,null,null);e["default"]=u.exports}}]);